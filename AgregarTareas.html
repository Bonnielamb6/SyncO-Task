<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sync O' task</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

</head>

<body>
    <!-- container start -->
    <div class="container">
        <!-- left start -->
        <div class="left">
            <!-- header start -->
            <header>
                <!-- logo start -->
                <div class="logo">
                    <h2>Sync O' Task</h2>
                    <div class="close">
                        <span class="material-symbols-outlined">
                            close
                        </span>
                    </div>
                </div>
                <!-- nav start -->
                <nav>
                    <ul>
                        <li class="mili">
                            <a href="AgregarTareas.html">
                                <span class="material-symbols-outlined">
                                    home
                                </span>
                                <span class="title">Inicio</span>
                            </a>
                        </li>
                        <li>
                            <a href="MisEntregas.html">
                                <span class="material-symbols-outlined">
                                    task
                                </span>
                                <span class="title">Mis entregas </span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- nav end -->
            </header>
            <!-- header end -->
        </div>
        <!-- left end -->
        <!-- right start -->
        <div class="right">
            <!-- top start -->
            <div class="top">
                <!-- searchBx start -->
                <div class="searchBx">
                    <h2>Inicio - Sync O' Task</h2>

                </div>
                <!-- searchBx end -->
                <!-- user start -->
                <div class="user">

                    <div class="userImg">
                        <img src="images/avatar.PNG" alt="user">
                    </div>
                    <h2>Usuario<br><span>Administrador</span></h2>
                    <div class="arrow">
                        <span class="material-symbols-outlined">
                            expand_more
                        </span>
                    </div>
                    <div class="toggle">
                        <span class="material-symbols-outlined">
                            menu
                        </span>
                        <span class="material-symbols-outlined">
                            close
                        </span>
                    </div>
                </div>
                <!-- user end -->
            </div>
            <!-- top end -->
            <!-- main start -->
            <main>
                <div class="newTasks">

                    <div class="newTaskHead">
                        <h2>Nueva tarea</h2>
                    </div>


                    <form id="formularioAgregar">
                        <p>Titulo</p>
                        <input type="text" id="taskTitle">
                        <p>Fecha de entrega</p>
                        <input type="date" id="task-dueDate">
                        <p>Tiempo de inicio</p>
                        <input type="time" id="task-timeBegin">
                        <p>Tiempo de finalizacion</p>
                        <input type="time" id="task-timeEnd">
                        <p>Descripcion de la tarea</p>
                        <textarea id="task-description" cols="30" rows="8"></textarea>
                        <p>SubTareas</p>
                        <input type="text" id="subTask">
                        <div id="subtareas">

                        </div>
                        <p>Prioridad</p>
                        <label>
                            <input type="radio" name="task-priority" value="Urgente" id="urgente"> Urgente
                        </label>

                        <label>
                            <input type="radio" name="task-priority" value="Normal" id="normal"> Normal
                        </label>

                        <label>
                            <input type="radio" name="task-priority" value="Baja" id="baja"> Baja
                        </label>

                        <p>Tags</p>
                        <button id="tag1" onclick="selectToggle('Casa')" data-option="Casa" type="button">Casa</button>
                        <button id="tag2" onclick="selectToggle('Escuela')" data-option="Escuela"
                            type="button">Escuela</button>
                        <button id="tag3" onclick="selectToggle('Trabajo')" data-option="Trabajo"
                            type="button">Trabajo</button>
                        <button id="tag4" onclick="selectToggle('Personal')" data-option="Personal"
                            type="button">Personal</button>

                        <br>
                        <button id="enviar" class="send" type="button">Mandar tarea</button>
                    </form>

                </div>

                <!-- myCompletedTasks start -->
                <div class="users">
                    <!-- tasksHead start -->
                    <div class="userHead">
                        <h2>Usuarios</h2>
                    </div>
                    <!-- tasksHead end -->
                    <!-- tasks start -->
                    <div class="user">
                        <ul>
                            <li>
                                <span class="userIconName">

                                    <span class="userName">
                                        Juan
                                    </span>
                                </span>
                            </li>
                            <li>
                                <span class="userIconName">
                                    <span class="userName">
                                        Pepe
                                    </span>
                                </span>

                            </li>
                            <li>
                                <span class="userIconName">
                                    <span class="userName">
                                        Antonio
                                    </span>
                                </span>
                            </li>
                            <li>
                                <span class="userIconName">

                                    <span class="userName">
                                        <underline>Manuel</underline>
                                    </span>
                                </span>
                            </li>
                            <li>
                                <span class="userIconName">

                                    <span class="userName">
                                        Adriana
                                    </span>
                                </span>
                            </li>
                            <li>
                                <span class="userIconName">

                                    <span class="userName">
                                        Maria
                                    </span>
                                </span>
                            </li>
                            <li>
                                <span class="userIconName">
                                    <span class="userName">
                                        Federico
                                    </span>
                                </span>

                            </li>
                        </ul>
                    </div>
                    <!-- user end -->
                </div>
                <!-- myCompletedTasks end -->


            </main>
            <!-- main end -->
        </div>
        <!-- right end -->
    </div>
    <!-- container end -->
</body>

<script>

    let selectedOption = null;

    function selectToggle(option) {
        // Deseleccionar la opción actual, si hay una
        if (selectedOption) {
            const previousButton = document.querySelector(`.container .right main .newTasks  form button[data-option="${selectedOption}"]`);
            if (previousButton) {
                previousButton.classList.remove('selected');
            }
        }
        // Seleccionar la nueva opción
        const currentButton = document.querySelector(`.container .right main .newTasks  form button[data-option="${option}"]`);
        if (currentButton) {
            currentButton.classList.add('selected');
            selectedOption = option;
        }
    }


    document.addEventListener('DOMContentLoaded', function () {
        const nuevaTarea = document.getElementById("formularioAgregar");

        const enviarTareaButton = document.getElementById('enviar');
        const primerInput = document.getElementById("subTask");
        const contenedorInputsAdicionales = document.getElementById('subtareas');

        function crearInputAdicional() {
            const nuevoInput = document.createElement('input');
            nuevoInput.type = 'text';
            nuevoInput.placeholder = 'Información adicional';
            nuevoInput.className = 'inputAdicional';
            nuevoInput.addEventListener('input', function () {
                // Al modificar el último input adicional, crear uno nuevo
                if (esUltimoInputAdicional(nuevoInput)) {
                    const otroNuevoInput = crearInputAdicional();
                    contenedorInputsAdicionales.appendChild(otroNuevoInput);
                }
            });
            return nuevoInput;
        }

        function esUltimoInputAdicional(input) {
            const hijos = contenedorInputsAdicionales.getElementsByClassName('inputAdicional');
            return input === hijos[hijos.length - 1];
        }

        primerInput.addEventListener('input', function () {
            actualizarInputsAdicionales();
        });

        function actualizarInputsAdicionales() {
            // Limpiar el contenedor de inputs adicionales
            contenedorInputsAdicionales.innerHTML = '';

            // Obtener el valor del primer input
            const valorPrimerInput = primerInput.value.trim();

            // Verificar si el valor no está vacío
            if (valorPrimerInput !== '') {
                // Crear un nuevo input adicional
                const nuevoInput = crearInputAdicional();
                contenedorInputsAdicionales.appendChild(nuevoInput);
            }
        }



        enviarTareaButton.addEventListener('click', async function () {
            // Tu lógica de envío del formulario aquí

            const radioButtons = document.getElementsByName('task-priority');

            let valorSeleccionado = null;

            for (const radioButton of radioButtons) {
                if (radioButton.checked) {
                    valorSeleccionado = radioButton.value;
                    break;  // Una vez que encuentras uno seleccionado, puedes salir del bucle
                }
            }

            const taskTitle = document.getElementById('taskTitle').value;
            const dueDate = document.getElementById('task-dueDate').value;
            const timeBegin = document.getElementById('task-timeBegin').value;
            const timeEnd = document.getElementById('task-timeEnd').value;
            const description = document.getElementById('task-description').value;
            const subTask = document.getElementById('subTask').value;
            const priority = valorSeleccionado;
            var tag = selectedOption;


            console.log(`Titulo: ${taskTitle}, Fecha: ${dueDate}, Tiempo: ${timeBegin}, TiempoFin: ${timeEnd}, Descripcion: ${description}, Subtareas: ${subTask}, Prioridad: ${priority}, Tag: ${tag}`);

            // try {
            //     if (!editStatus) {
            //         await saveTask(title.value, description.value, dueDate.value, priority.value, tags);
            //     } else {
            //         await updateTask(id, {
            //             title: title.value,
            //             description: description.value,
            //             dueDate: dueDate.value,
            //             priority: priority.value,
            //             tags: tags,
            //         });

            //         editStatus = false;
            //         id = "";
            //         nuevaTarea["btn-task-form"].innerText = "Save";
            //     }

            //     nuevaTarea.reset();
            //     title.focus();
            // } catch (error) {
            //     console.log(error);
            // }


        });




    });


</script>

</html>